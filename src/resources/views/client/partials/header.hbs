<!-- Page Preloder -->
<div id="preloder">
    <div class="loader"></div>
</div>

<!-- Header Section Begin -->
<header class="header">
    <div class="header__top">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-md-6">
                    <div class="header__top__left">
                        <ul>
                            <li><i class="fa fa-envelope"></i> hello@colorlib.com</li>
                            <li>Free Shipping for all Order of $99</li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6">
                    <div class="header__top__right">
                        <div class="header__top__right__social">
                            <a href="#"><i class="fa fa-facebook"></i></a>
                            <a href="#"><i class="fa fa-twitter"></i></a>
                            <a href="#"><i class="fa fa-linkedin"></i></a>
                            <a href="#"><i class="fa fa-pinterest-p"></i></a>
                        </div>
                        <div class="header__top__right__language">
                            <img src="img/language.png" alt="">
                            <div>English</div>
                            <span class="arrow_carrot-down"></span>
                            <ul>
                                <li><a href="#">Spanis</a></li>
                                <li><a href="#">English</a></li>
                            </ul>
                        </div>
                        <div class="header__top__right__auth">
                            {{#if user}}
                            <div class="dropdown">
                                <a href="/infomation" class="dropdown-toggle" id="userDropdown" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                    <i class="fa fa-user"></i> {{user.fullName}}
                                </a>
                                <div class="dropdown-menu" aria-labelledby="userDropdown">
                                    <a class="dropdown-item" href="/infomation">Thông tin cá nhân</a>
                                    <a class="dropdown-item" href="/logout">Đăng xuất</a>
                                </div>
                            </div>
                            {{else}}
                            <a href="/login"><i class="fa fa-user"></i> Login</a>
                            {{/if}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-lg-3">
                <div class="header__logo">
                    <a href="./index.html"><img src="img/logo.png" alt=""></a>
                </div>
            </div>
            <div class="col-lg-6">
                <nav class="header__menu">
                    <ul>
                        <li class="active"><a href="/product">Home</a></li>
                        <li><a href="/catalog">Shop</a></li>
                        <li><a href="#">Pages</a>
                            <ul class="header__menu__dropdown">
                                <li><a href="/product/6815d169cea2819e0b3f7180">Shop Details</a></li>
                                <li><a href="./shoping-cart.html">Shoping Cart</a></li>
                                <li><a href="./checkout.html">Check Out</a></li>
                                <li><a href="./blog-details.html">Blog Details</a></li>
                            </ul>
                        </li>
                        <li><a href="./blog.html">Blog</a></li>
                        <li><a href="./contact.html">Contact</a></li>
                    </ul>
                </nav>
            </div>
            <div class="col-lg-3">
                <div class="header__cart">
                    <ul>
                        <li><a href="#"><i class="fa fa-heart"></i> <span>1</span></a></li>
                        <li><a href="/cart"><i class="fa fa-shopping-bag"></i> <span>{{cartCount}}</span></a></li>
                    </ul>
                    <div class="header__cart__price">item: <span>$150.00</span></div>
                </div>
            </div>
        </div>
        <div class="humberger__open">
            <i class="fa fa-bars"></i>
        </div>
    </div>
</header>
<!-- Header Section End -->

<!-- Hero Section Begin -->
<section class="hero hero-normal">
    <div class="container">
        <div class="row">
            <div class="col-lg-3">
                <div class="hero__categories">
                    <div class="hero__categories__all">
                        <i class="fa fa-bars"></i>
                        <span>All departments</span>
                    </div>
                    <ul style="display: none;">
                        <li><a href="#">Fresh Meat</a></li>
                        <li><a href="#">Vegetables</a></li>
                        <li><a href="#">Fruit & Nut Gifts</a></li>
                        <li><a href="#">Fresh Berries</a></li>
                        <li><a href="#">Ocean Foods</a></li>
                        <li><a href="#">Butter & Eggs</a></li>
                        <li><a href="#">Fastfood</a></li>
                        <li><a href="#">Fresh Onion</a></li>
                        <li><a href="#">Papayaya & Crisps</a></li>
                        <li><a href="#">Oatmeal</a></li>
                        <li><a href="#">Fresh Bananas</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-9">
                <div class="hero__search d-flex justify-content-between align-items-start flex-wrap">

                    <!-- Thanh tìm kiếm -->
                    <div class="container mt-4 mb-4 flex-grow-1" style="max-width: 600px; z-index: 1050;">
                        <input type="text" id="searchInput" placeholder="Tìm sản phẩm..." class="form-control w-100"
                            autocomplete="off">
                        <div id="searchResults"
                            class="list-group position-absolute w-100 bg-white shadow border rounded"
                            style="z-index: 2000; top: 100%; max-height: 300px; overflow-y: auto;">
                        </div>
                    </div>
                    <!-- Phone support giữ nguyên -->
                    <div class="hero__search__phone mt-4 ms-3">
                        <div class="hero__search__phone__icon">
                            <i class="fa fa-phone"></i>
                        </div>
                        <div class="hero__search__phone__text">
                            <h5>+65 11.188.888</h5>
                            <span>support 24/7 time</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Hero Section End -->
<!-- Script tìm kiếm -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const input = document.getElementById("searchInput");
        const results = document.getElementById("searchResults");

        input.addEventListener("input", async function () {
            const query = this.value.trim();
            if (!query) {
                results.innerHTML = "";
                return;
            }

            try {
                const res = await fetch(`/search?q=${encodeURIComponent(query)}`);
                const data = await res.json();

                results.innerHTML = "";
                if (data.length === 0) {
                    const el = document.createElement("div");
                    el.className = "list-group-item";
                    el.textContent = "Không tìm thấy sản phẩm.";
                    results.appendChild(el);
                } else {
                    data.forEach(item => {
                        const el = document.createElement("a");
                        el.href = `/product/${item.id}`;
                        el.className = "list-group-item list-group-item-action";
                        el.textContent = item.title;
                        results.appendChild(el);
                    });
                }
            } catch (err) {
                console.error("Lỗi tìm kiếm:", err);
            }
        });
    });
</script>